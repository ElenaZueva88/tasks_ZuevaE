Создание нового поста

URL: https://test-stand.gb.ru/posts/create 

Макет: https://www.figma.com/file/XMboQDGNkOBzbRSx0mrwQ8/test-stand.gb.ru-(Copy)?type=design&node-id=0%3A1&t=edKHjW5Ei1EZ9COw-1 

Точка входа: значок плюс на экране ввода


Пользовательский сценарий

Пользователь: нажимает на + на экране Блога
Система: отображает экран создания поста
Пользователь: заполняет все поля 
Система: валидирует поля. При успехе создает пост, подсчитывает время на чтение и редиректит пользователя на экран созданного поста


Требования, условия и ограничения




Требование
Отработка ошибки
Пост не может быть пустым. Должно быть заполнено одно из полей: Title, Description, Content, New image
Под кнопкой Save выводится ошибка с текстом Невозможно создать пустой пост
Title – не более 40 символов
При попытке ввести 41 символ – под полем выводится ошибка с текстом 40 символов максимум

Скопированный текст обрезается до 40 символов
Description – не более 100 символов
При попытке ввести 101 символ – под полем выводится ошибка с текстом 100 символов максимум

Скопированный текст обрезается до 100 символов
Каунтер - считает кол-во введенных символов в поле Description после каждого изменения. По дефолту 0/100
-
Description – не более 1000 символов
При попытке ввести 1001 символ – под полем выводится ошибка с текстом 1000 символов максимум

Скопированный текст обрезается до 1000 символов
Пост можно сохранить в черновики через тумблер Post is draft. В этом случае пост не публикуется и будет доступен в разделе Drafts
-
Публикацию поста можно отложить указанием даты и времени в  Delay post to. Невозможно установить дату и время раньше текущего момента
Ошибка Дата не может быть меньше сегодняшнего
Прикрепление фотографии 
1. Форматы png, jpg, jpeg
2. Размер не более 2Mb   
3. Поддерживает загрузку с устройства и drug&drop
4. При успешной загрузке показывает название фото и превью фото c соотношением сторон 1:1. 
5. Если фото не загружено – вешается заглушка

1. Ошибка Только jpg, jpeg, png
2. Ошибка Максимальный размер 2Mb




Создание поста
POST https://test-stand.gb.ru/gateway/posts

В теле запроса передаются следующие параметры:

"image": image/jpeg,	
"title": "String",
"description": "String",
"content": "String",
"isDraft": Integer,
"delayPublishTo": "String"


где:
	image – изображение товара, передается как файл,
	title – название поста,
	description – описание, 
	content – текст поста,
	isDraft – 0/1 - отложенная публикация,
	delayPublishTo – дата публикации в формате ГГГГ-ММ-ДД
(например 2022-10-01)


В случае успешного запроса, в response мы получаем:

{
	"item": {
		"id": Integer,
		"title": "String",
		"description": "String",
		"content": "String",
		"authorId": Integer,
		"mainImage": {
			"id": Integer,
			"cdnUrl": "String"
		},
		"updatedAt": "String",
		"createdAt": "String",
		"labels": "",
		"delayPublishTo": "String",
		"draft": Boolean
	}
}


где:
	id – идентификатор поста,
title – имя пользователя/логин,
description – токен пользователя (необходим для авторизации),
content – массив с присвоенными ролями пользователю,
authorId – идентификатор пользователя,
mainImage – изображение,
updatedAt – дата обновления поста,
createdAt – дата создания поста,
labels – лейблы,
delayPublishTo – отложенная публикация,
	draft – черновик [false | true]. 

В случае, если выполняется запрос без передачи в теле необходимых параметров, то в ответе мы получим status code 400 и message: “Невозможно создать пост, заполните поля”.



Если отправить запрос без токена, то будет в ответе:

{
    "error": "Необходимо авторизоваться",
    "code": 403,
    "message": "No API token provided or is not valid"
}

